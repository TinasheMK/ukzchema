(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1:function(t,e,s){"use strict";function i(t,e,s,i,n,a,o,l){var r,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=s,d._compiled=!0),i&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),o?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=r):n&&(r=l?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),r)if(d.functional){d._injectStyles=r;var c=d.render;d.render=function(t,e){return r.call(e),c(t,e)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,r):[r]}return{exports:t,options:d}}s.d(e,"a",(function(){return i}))},13:function(t,e,s){var i=s(213);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s(8)(i,n);i.locals&&(t.exports=i.locals)},21:function(t,e,s){var i,n,a;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n=[s(6)],void 0===(a="function"==typeof(i=function(t){var e={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1060,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-11 col-md-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss"><i class="nc-icon nc-simple-remove"></i></button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};function s(s,i,n){var a,l,r={content:{message:"object"===o(i)?i.message:i,title:i.title?i.title:"",icon:i.icon?i.icon:"",url:i.url?i.url:"#",target:i.target?i.target:"-"}};n=t.extend(!0,{},r,n),this.settings=t.extend(!0,{},e,n),this._defaults=e,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&(a=this,l=!1,t('[data-notify="container"]').each((function(e,s){var i=t(s),n=i.find('[data-notify="title"]').html().trim(),o=i.find('[data-notify="message"]').html().trim(),r=n===t("<div>"+a.settings.content.title+"</div>").html().trim(),d=o===t("<div>"+a.settings.content.message+"</div>").html().trim(),c=i.hasClass("alert-"+a.settings.type);return r&&d&&c&&(l=!0),!l})),!l))&&this.init()}String.format=function(){var t=arguments,e=arguments[0];return e.replace(/(\{\{\d\}\}|\{\d\})/g,(function(e){if("{{"===e.substring(0,2))return e;var s=parseInt(e.match(/\d/)[0]);return t[s+1]}))},t.extend(s.prototype,{init:function(){var t=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(e,s){var i={};for(var n in"string"==typeof e?i[e]=s:i=e,i)switch(n){case"type":this.$ele.removeClass("alert-"+t.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+t.settings.type),t.settings.type=i[n],this.$ele.addClass("alert-"+i[n]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+i[n]);break;case"icon":var a=this.$ele.find('[data-notify="icon"]');"class"===t.settings.icon_type.toLowerCase()?a.removeClass(t.settings.content.icon).addClass(i[n]):(a.is("img")||a.find("img"),a.attr("src",i[n])),t.settings.content.icon=i[e];break;case"progress":var o=t.settings.delay-t.settings.delay*(i[n]/100);this.$ele.data("notify-delay",o),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i[n]).css("width",i[n]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",i[n]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",i[n]);break;default:this.$ele.find('[data-notify="'+n+'"]').html(i[n])}var l=this.$ele.outerHeight()+parseInt(t.settings.spacing)+parseInt(t.settings.offset.y);t.reposition(l)},close:function(){t.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=t(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){this.$ele.addClass("alert-with-icon"),"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"50%",marginTop:"-13px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var e=this,s=this.settings.offset.y,i={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},n=!1,a=this.settings;switch(t('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each((function(){s=Math.max(s,parseInt(t(this).css(a.placement.from))+parseInt(t(this).outerHeight())+parseInt(a.spacing))})),!0===this.settings.newest_on_top&&(s=this.settings.offset.y),i[this.settings.placement.from]=s+"px",this.settings.placement.align){case"left":case"right":i[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":i.left=0,i.right=0}this.$ele.css(i).addClass(this.settings.animate.enter),t.each(Array("webkit-","moz-","o-","ms-",""),(function(t,s){e.$ele[0].style[s+"AnimationIterationCount"]=1})),t(this.settings.element).append(this.$ele),!0===this.settings.newest_on_top&&(s=parseInt(s)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(s)),t.isFunction(e.settings.onShow)&&e.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,(function(){n=!0})).one(this.animations.end,(function(){e.$ele.removeClass(e.settings.animate.enter),t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)})),setTimeout((function(){n||t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)}),600)},bind:function(){var e=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",(function(){e.close()})),t.isFunction(e.settings.onClick)&&this.$ele.on("click",(function(t){t.target!=e.$ele.find('[data-notify="dismiss"]')[0]&&e.settings.onClick.call(this,t)})),this.$ele.mouseover((function(){t(this).data("data-hover","true")})).mouseout((function(){t(this).data("data-hover","false")})),this.$ele.data("data-hover","false"),this.settings.delay>0){e.$ele.data("notify-delay",e.settings.delay);var s=setInterval((function(){var t=parseInt(e.$ele.data("notify-delay"))-e.settings.timer;if("false"===e.$ele.data("data-hover")&&"pause"===e.settings.mouse_over||"pause"!=e.settings.mouse_over){var i=(e.settings.delay-t)/e.settings.delay*100;e.$ele.data("notify-delay",t),e.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i).css("width",i+"%")}t<=-e.settings.timer&&(clearInterval(s),e.close())}),e.settings.timer)}},close:function(){var e=this,s=parseInt(this.$ele.css(this.settings.placement.from)),i=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),e.reposition(s),t.isFunction(e.settings.onClose)&&e.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,(function(){i=!0})).one(this.animations.end,(function(){t(this).remove(),t.isFunction(e.settings.onClosed)&&e.settings.onClosed.call(this)})),setTimeout((function(){i||(e.$ele.remove(),e.settings.onClosed&&e.settings.onClosed(e.$ele))}),600)},reposition:function(e){var s=this,i='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',n=this.$ele.nextAll(i);!0===this.settings.newest_on_top&&(n=this.$ele.prevAll(i)),n.each((function(){t(this).css(s.settings.placement.from,e),e=parseInt(e)+parseInt(s.settings.spacing)+t(this).outerHeight()}))}}),t.notify=function(t,e){return new s(this,t,e).notify},t.notifyDefaults=function(s){return e=t.extend(!0,{},e,s)},t.notifyClose=function(e){void 0===e||"all"===e?t("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===e||"info"===e||"warning"===e||"danger"===e?t(".alert-"+e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):e?t(e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")},t.notifyCloseExcept=function(e){"success"===e||"info"===e||"warning"===e||"danger"===e?t("[data-notify]").not(".alert-"+e).find('[data-notify="dismiss"]').trigger("click"):t("[data-notify]").not(e).find('[data-notify="dismiss"]').trigger("click")}})?i.apply(e,n):i)||(t.exports=a)},212:function(t,e,s){"use strict";var i=s(13);s.n(i).a},213:function(t,e,s){(t.exports=s(7)(!1)).push([t.i,".dob{background-color:#fff!important;color:#7d7a75!important;cursor:pointer!important}",""])},236:function(t,e,s){"use strict";s.r(e);s(21);var i={props:["route","nominees","can_update","maximum_nominees"],components:{Datepicker:function(){return s.e(0).then(s.bind(null,274))}},data:function(){return{form:{},date:{},unlocked:!!this.can_update,nominee_vacant:0,updated_nominees:this.nominees,del_full_name:null,max_nominees:0,del_route:null}},mounted:function(){this.max_nominees=Number(this.maximum_nominees),console.log(this.can_update,this.max_nominees),this.nominee_vacant=this.max_nominees-this.nominees.length,this.unlocked||this.alertLocked()},methods:{add:function(){this.nominee_vacant-=1,this.updated_nominees.push({full_name:null,id:(new Date).getTime()+"_new"})},del:function(t){if(isNaN(t.id))return this.updated_nominees=this.updated_nominees.filter((function(e){return e.id!==t.id})),void(this.nominee_vacant=3-this.updated_nominees.length);this.del_full_name=t.full_name,this.del_route="".concat(this.route,"/").concat(t.id),setTimeout((function(){return $("#remove_nominee").modal("show")}),20)},alertLocked:function(){$.notify({icon:"nc-icon nc-bell-55",message:"You cannot update nominees at the moment"},{type:"info",timer:2e3,placement:{from:"top",align:"right"}})}}},n=(s(212),s(1)),a=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{attrs:{action:t.route,method:"POST"}},[t._t("default"),t._v(" "),s("div",{staticClass:"row"},[t._l(t.updated_nominees,(function(e,i){return s("div",{key:e.id,staticClass:"col-md-6"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[t._v("\n              Nominee "+t._s(i+1)+"\n              "),t.unlocked?s("span",{staticClass:"close text-danger",on:{click:function(s){return t.del(e)}}},[s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):t._e()])]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("input",{attrs:{type:"hidden",name:"nominees["+i+"][id]"},domProps:{value:e.id}}),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Full Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.full_name,expression:"nominee.full_name"}],staticClass:"form-control",attrs:{required:"",name:"nominees["+i+"][full_name]",type:"text",disabled:!t.unlocked},domProps:{value:e.full_name},on:{input:function(s){s.target.composing||t.$set(e,"full_name",s.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email address")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"nominee.email"}],staticClass:"form-control",attrs:{name:"nominees["+i+"][email]",type:"email",disabled:!t.unlocked},domProps:{value:e.email},on:{input:function(s){s.target.composing||t.$set(e,"email",s.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Date of Birth")]),t._v(" "),s("datepicker",{attrs:{format:"dd MMMM yyyy",initialView:"year",disabled:!t.unlocked,name:"nominees["+i+"][dob]","input-class":t.unlocked?"form-control dob":"form-control nom"},model:{value:e.dob,callback:function(s){t.$set(e,"dob",s)},expression:"nominee.dob"}})],1)]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Zimbabwean By")]),t._v(" "),s("select",{staticClass:"form-control select2",attrs:{disabled:!t.unlocked,required:"",name:"nominees["+i+"][zimbabwean_by]"}},[s("option",{attrs:{value:"birth"},domProps:{selected:"birth"===e.zimbabwean_by}},[t._v("Birth")]),t._v(" "),s("option",{attrs:{value:"descent"},domProps:{selected:"descent"===e.zimbabwean_by}},[t._v("Descent")]),t._v(" "),s("option",{attrs:{value:"spouse"},domProps:{selected:"spouse"===e.zimbabwean_by}},[t._v("Spouse")])])])])])])])])})),t._v(" "),t.can_update&&t.nominee_vacant>=1?s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"card card-user text-center p-3"},[s("p",{staticClass:"mt-3 mb-2"},[t._v("\n            Click button to add new nominee details\n            "),s("br"),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("You can add "+t._s(t.nominee_vacant)+" more nominee"+t._s(1===t.nominee_vacant?"":"s"))])]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-round",attrs:{type:"button"},on:{click:function(e){return t.add()}}},[t._v("Add Nominee")])])]):t._e(),t._v(" "),t.can_update&&3!==t.nominee_vacant?s("div",{staticClass:"col-12 text-center"},[s("button",{staticClass:"btn btn-primary btn-round",attrs:{type:"submit"}},[t._v("Update Changes")])]):t._e(),t._v(" "),s("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"110px"}})],2)],2),t._v(" "),t.can_update?s("div",{staticClass:"modal fade modal-danger",attrs:{id:"remove_nominee"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header bg-danger"},[s("h4",{staticClass:"modal-title mt-0"},[t._v("\n            Are you sure you want to remove "),s("strong",[t._v(t._s(t.del_full_name))]),t._v(" from your nominees list?\n          ")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[t._v("Ã—")])]),t._v(" "),s("form",{attrs:{action:t.del_route,method:"POST"}},[t._t("default"),t._v(" "),s("input",{attrs:{type:"hidden",name:"_method",value:"DELETE"}}),t._v(" "),t._m(0)],2)])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cancel")]),this._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"submit"}},[this._v("Delete")])])}],!1,null,null,null);e.default=a.exports}}]);