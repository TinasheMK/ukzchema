(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1:function(t,e,n){"use strict";function a(t,e,n,a,o,r,s,i){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),a&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=i?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return a}))},239:function(t,e,n){"use strict";n.r(e);var a={props:["route","user","client_id"],mounted:function(){var t=this;console.log(this.user,this.client_id),$("#depositModal").on("show.bs.modal",(function(e){if(!t.open){var n=document.createElement("script");n.src="https://www.paypal.com/sdk/js?client-id=".concat(t.client_id,"&currency=GBP"),n.addEventListener("load",t.loadPayPal),n.addEventListener("error",t.loadError),document.body.append(n),t.script=n}})),$("#depositModal").on("hidden.bs.modal",(function(e){t.error&&(t.error=!1,$(t.script).remove(),t.load=!1)}))},data:function(){return{open:!1,error:!1,amount:null,payment_ref:null,script:null}},methods:{finalise:function(t){var e=this;console.log(t),$.notify({icon:"nc-icon nc-check-2",message:"Deposited Successfully. Please wait.."},{type:"primary",timer:5e3,placement:{from:"top",align:"right"}}),this.payment_ref=t,setTimeout((function(){return e.$refs.form.submit()}),80)},loadError:function(){this.error=!0},loadPayPal:function(t){var e=this;this.open=!0,console.log(t,"Loaded Successfully"),"undefined"!=typeof paypal?paypal.Buttons({createOrder:function(t,n){return n.order.create({application_context:{brand_name:"UKZ Chema Association",user_action:"PAY_NOW",shipping_preference:"NO_SHIPPING"},purchase_units:[{description:"Funds Deposit for user: ".concat(e.user.id," (").concat(e.user.name,")"),amount:{currency_code:"GBP",value:e.amount}}]})},onApprove:function(t,n){return n.order.capture().then((function(n){"COMPLETED"==n.status?(e.orderID=t.orderID,e.finalise(t.orderID)):$.notify({icon:"nc-icon nc-simple-remove",message:"Error saving your payment, contact support with ID: ".concat(t.orderID)},{type:"danger",timer:8e3,placement:{from:"top",align:"right"}})}))}}).render(this.$refs.paypal):this.error=!0}}},o=n(1),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade",attrs:{id:"depositModal",tabindex:"-1",role:"dialog","aria-labelledby":"depositModalTitle","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"col-12 mb-2"},[n("label",{attrs:{for:"_amount"}},[t._v("Amount")]),t._v(" "),n("div",{staticClass:"input-group mb-3"},[t._m(1),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],staticClass:"form-control",attrs:{id:"_amount",type:"number",placeholder:"Amount","aria-label":"Amount","aria-describedby":"amount"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),t.open||t.error?t._e():n("p",{staticClass:"text-center"},[n("i",{staticClass:"fa fa-circle-o-notch fa-spin"}),t._v(" Loading PayPal\n        ")]),t._v(" "),t.error?n("p",{staticClass:"text-danger text-center"},[n("i",{staticClass:"fa fa-frown-o"}),t._v("\n          Error loading PayPal. Refresh this page.\n        ")]):t._e(),t._v(" "),t.open?n("h5",{staticClass:"h6"},[t._v("Deposit method:")]):t._e(),t._v(" "),n("div",{ref:"paypal",staticClass:"mx-2 mt-3"}),t._v(" "),n("form",{ref:"form",attrs:{action:t.route,method:"POST"}},[t._t("default"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.payment_ref,expression:"payment_ref"}],attrs:{type:"hidden",name:"payment_ref"},domProps:{value:t.payment_ref},on:{input:function(e){e.target.composing||(t.payment_ref=e.target.value)}}})],2)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"depositModalTitle"}},[this._v("Deposit Funds")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"amount"}},[this._v("£")])])}],!1,null,null,null);e.default=r.exports}}]);